<!DOCTYPE html>
<html lang="en" class="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PredictAI – Token Launch</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts: Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- SweetAlert2 CDN -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- Jdenticon CDN (for generative logos) -->
  <script src="https://cdn.jsdelivr.net/npm/jdenticon@3.2.0/dist/jdenticon.min.js" crossorigin="anonymous"></script>
  <!-- Custom Styles -->
  <link rel="stylesheet" href="styles.css">
  <style>
    @keyframes pulse-accent-border {
      0% { border-left-color: #56eced; } /* NEW Tailwind accent color */
      50% { border-left-color: rgba(86, 236, 237, 0.5); } /* NEW Accent with 50% opacity */
      100% { border-left-color: #56eced; }
    }
    .sidebar-link.active.animate-pulse-border {
      animation: pulse-accent-border 1.5s infinite;
      border-left-width: 4px !important; 
      border-left-style: solid !important;
      background-color: transparent !important;
    }
    .sidebar-link.active {
        color: #56eced !important; 
        border-left-color: #56eced !important; 
        background-color: transparent !important;
    }
    .sidebar-link.active i {
      color: #56eced !important; 
    }
    .sidebar-link.active:hover {
        background-color: transparent !important;
    }
    .swal2-icon-no-border.swal2-icon-show {
        border: none !important;
    }
    .swal2-icon-no-border.swal2-icon-show .swal2-icon-content {
        /* If your logo is SVG and needs specific styling, you might target it here */
        /* For img tags, it's usually not necessary */
    }
    @media (max-width: 767px) {
      aside.fixed {
        width: 64px !important;
        min-width: 64px !important;
        max-width: 64px !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      .sidebar-link {
        justify-content: center !important;
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      .sidebar-link span, .sidebar-link .sidebar-label, .sidebar-link .ml-2, .sidebar-link .font-medium {
        display: none !important;
      }
      aside .mb-8, aside .mt-auto, aside p, aside img {
        display: none !important;
      }
    }
  </style>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        fontFamily: {
          'sans': ['Inter', 'ui-sans-serif', 'system-ui'],
        },
        extend: {
          colors: {
            'light-bg': '#F8F9FB',
            'light-sidebar': '#FFFFFF',
            'light-text': '#222222',
            'light-text-secondary': '#666666',
            'light-card-bg': '#FFFFFF',
            'light-border': '#E5E7EB',

            'dark-bg': '#121212',
            'dark-sidebar': '#1A1A1A',
            'dark-text': '#FFFFFF',
            'dark-text-secondary': '#B0B0B0',
            'dark-card-bg': '#1F2937',
            'dark-border': '#374151',

            'accent': '#56eced',
            'accent-hover': '#47C8D0', /* Darker shade of #56eced */
            'highlight': '#34D399',
          },
          maxWidth: {
            'container': '1200px',
          },
          boxShadow: {
            'cursor': '0 0 0 1px #00C4B4, 0 2px 4px rgba(0,0,0,0.05)',
            'cursor-hover': '0 0 0 1px #00A393, 0 3px 6px rgba(0,0,0,0.07)',
            'dark-cursor': '0 0 0 1px #00C4B4, 0 2px 4px rgba(0,0,0,0.2)',
            'dark-cursor-hover': '0 0 0 1px #00A393, 0 3px 6px rgba(0,0,0,0.3)',
            'card-light': '0 4px 12px rgba(0,0,0,0.08)',
            'card-dark': '0 4px 12px rgba(0,0,0,0.25)',
          }
        },
      },
    }
  </script>
</head>
<body class="bg-light-bg text-light-text min-h-screen flex dark:bg-dark-bg dark:text-dark-text">
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="animated-circle circle1"></div>
    <div class="animated-circle circle2"></div>
    <div class="animated-circle circle3"></div>
  </div>
  <!-- Sidebar -->
  <aside class="fixed top-0 left-0 h-full w-[250px] bg-light-sidebar flex flex-col py-6 z-20 shadow-xl border-r border-light-border dark:bg-dark-sidebar dark:border-dark-border">
    <div class="mb-8 flex flex-col items-center px-4 pt-4">
      <img src="sidelogo.png" alt="PredictAI Logo" class="w-full mb-2">
      <p class="text-xs text-light-text-secondary dark:text-dark-text-secondary">AI Memecoin Insights</p>
    </div>
    <nav class="flex-1 w-full px-4">
      <ul class="flex flex-col gap-1.5 w-full">
        <li><a href="index.html" class="sidebar-link group flex items-center px-5 py-3 rounded-lg font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-accent dark:hover:text-accent hover:bg-accent/10 dark:hover:bg-accent/20 transition-colors duration-150 ease-in-out"><i class="fas fa-home w-5 h-5 mr-2.5 text-gray-400 dark:text-gray-500 group-hover:text-accent dark:group-hover:text-accent transition-colors duration-150 ease-in-out"></i><span class="sidebar-label">Home</span></a></li>
        <li><a href="dashboard.html" class="sidebar-link group flex items-center px-5 py-3 rounded-lg font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-accent dark:hover:text-accent hover:bg-accent/10 dark:hover:bg-accent/20 transition-colors duration-150 ease-in-out"><i class="fas fa-chart-line w-5 h-5 mr-2.5 text-gray-400 dark:text-gray-500 group-hover:text-accent dark:group-hover:text-accent transition-colors duration-150 ease-in-out"></i><span class="sidebar-label">Hype-Score</span></a></li>
        <li><a href="suggestions.html" class="sidebar-link group flex items-center px-5 py-3 rounded-lg font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-accent dark:hover:text-accent hover:bg-accent/10 dark:hover:bg-accent/20 transition-colors duration-150 ease-in-out"><i class="fas fa-lightbulb w-5 h-5 mr-2.5 text-gray-400 dark:text-gray-500 group-hover:text-accent dark:group-hover:text-accent transition-colors duration-150 ease-in-out"></i><span class="sidebar-label">Discovery Engine</span></a></li>
        <li><a href="token-launch.html" class="sidebar-link group flex items-center px-5 py-3 rounded-lg font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-accent dark:hover:text-accent hover:bg-accent/10 dark:hover:bg-accent/20 transition-colors duration-150 ease-in-out"><i class="fas fa-rocket w-5 h-5 mr-2.5 text-gray-400 dark:text-gray-500 group-hover:text-accent dark:group-hover:text-accent transition-colors duration-150 ease-in-out"></i><span class="sidebar-label">Token Launch</span></a></li>
        <li><a href="launched-tokens.html" class="sidebar-link group flex items-center px-5 py-3 rounded-lg font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-accent dark:hover:text-accent hover:bg-accent/10 dark:hover:bg-accent/20 transition-colors duration-150 ease-in-out"><i class="fas fa-tasks w-5 h-5 mr-2.5 text-gray-400 dark:text-gray-500 group-hover:text-accent dark:group-hover:text-accent transition-colors duration-150 ease-in-out"></i><span class="sidebar-label">Launched Tokens</span></a></li>
        <li><a href="community.html" class="sidebar-link group flex items-center px-5 py-3 rounded-lg font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-accent dark:hover:text-accent hover:bg-accent/10 dark:hover:bg-accent/20 transition-colors duration-150 ease-in-out"><i class="fas fa-users w-5 h-5 mr-2.5 text-gray-400 dark:text-gray-500 group-hover:text-accent dark:group-hover:text-accent transition-colors duration-150 ease-in-out"></i><span class="sidebar-label">Community</span></a></li>
        <li><a href="influencer.html" class="sidebar-link group flex items-center px-5 py-3 rounded-lg font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-accent dark:hover:text-accent hover:bg-accent/10 dark:hover:bg-accent/20 transition-colors duration-150 ease-in-out"><i class="fas fa-user-secret w-5 h-5 mr-2.5 text-gray-400 dark:text-gray-500 group-hover:text-accent dark:group-hover:text-accent transition-colors duration-150 ease-in-out"></i><span class="sidebar-label">Influencer Analysis</span></a></li>
        <li><a href="revenue-sharing.html" class="sidebar-link group flex items-center px-5 py-3 rounded-lg font-medium text-light-text-secondary dark:text-dark-text-secondary hover:text-accent dark:hover:text-accent hover:bg-accent/10 dark:hover:bg-accent/20 transition-colors duration-150 ease-in-out"><i class="fas fa-sack-dollar w-5 h-5 mr-2.5 text-gray-400 dark:text-gray-500 group-hover:text-accent dark:group-hover:text-accent transition-colors duration-150 ease-in-out"></i><span class="sidebar-label">Revenue-Sharing</span></a></li>
      </ul>
    </nav>
    <div class="mt-auto px-4 pb-4 w-full">
      <button id="theme-toggle" class="w-full flex items-center justify-center p-3 rounded-lg bg-light-bg dark:bg-dark-bg hover:bg-light-border dark:hover:bg-dark-border transition-colors text-light-text-secondary dark:text-dark-text-secondary" title="Toggle light/dark mode">
        <span id="theme-icon" class="text-xl">🌙</span>
        <span class="ml-2 font-medium text-sm">Toggle Mode</span>
      </button>
    </div>
  </aside>

  <!-- Main Content Wrapper -->
  <div class="flex-1 flex flex-col min-h-screen ml-[250px]">
    <!-- Top Bar -->
    <header class="w-full flex justify-end items-center px-6 py-3 bg-light-bg/80 dark:bg-dark-bg/80 backdrop-blur-md sticky top-0 z-10 border-b border-light-border dark:border-dark-border" style="min-height: 60px;">
      <div id="wallet-section" class="flex items-center gap-3">
        <button id="connect-wallet" class="bg-transparent text-accent border-2 border-accent font-semibold rounded-md px-4 py-2 text-xs hover:bg-accent hover:text-gray-900 transition-colors duration-300 flex items-center">
          <i class="fas fa-wallet mr-1 sm:mr-2"></i>Connect Wallet
        </button>
        <span id="wallet-balance" class="hidden bg-highlight/10 text-highlight rounded-md px-3 py-1.5 text-xs font-medium dark:bg-highlight/20 dark:text-highlight">Balance: <span id="wallet-balance-amount">0</span> SOL</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 px-6 md:px-10 py-8 md:py-12">
      <div class="w-full max-w-container mx-auto">
        <!-- Page Title -->
        <div class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-light-text dark:text-dark-text">AI-Powered Token Launchpad</h1>
            <p class="text-base text-light-text-secondary dark:text-dark-text-secondary mt-1">Leverage real-time hype analysis to create and deploy your next viral memecoin on Solana.</p>
        </div>

        <!-- Information Section (Moved Up) -->
        <section class="mb-8 md:mb-12">
             <h2 class="text-2xl font-semibold mb-4 text-light-text dark:text-dark-text">How Our Launch Process Works</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="card bg-light-card-bg dark:bg-dark-card-bg p-6 rounded-xl shadow-card-light dark:shadow-card-dark">
                    <h3 class="text-lg font-semibold mb-2 text-accent flex items-center"><i class="fas fa-lightbulb mr-2"></i>1. Get Inspired & Define</h3>
                    <p class="text-sm text-light-text-secondary dark:text-dark-text-secondary">Pick an AI-generated token idea or define your own memecoin. Fill in name, symbol, description, and an optional image. Total supply (1 Billion) and decimals (9) are fixed.</p>
                </div>
                <div class="card bg-light-card-bg dark:bg-dark-card-bg p-6 rounded-xl shadow-card-light dark:shadow-card-dark">
                    <h3 class="text-lg font-semibold mb-2 text-accent flex items-center"><i class="fas fa-tasks mr-2"></i>2. Choose Platform & Confirm</h3>
                    <p class="text-sm text-light-text-secondary dark:text-dark-text-secondary">Select your preferred launch platform. Review all your token details carefully before proceeding.</p>
                </div>
                <div class="card bg-light-card-bg dark:bg-dark-card-bg p-6 rounded-xl shadow-card-light dark:shadow-card-dark">
                    <h3 class="text-lg font-semibold mb-2 text-accent flex items-center"><i class="fas fa-rocket mr-2"></i>3. Prepare Launch</h3>
                    <p class="text-sm text-light-text-secondary dark:text-dark-text-secondary">Click "Launch now with PredictAI" to prepare your token. You'll receive a confirmation and a reference for your new memecoin configuration.</p>
                </div>
            </div>
        </section>

        <!-- Hype Analysis & Suggestions Section -->
        <!-- This will be split into two sections: Pulse and Horizon -->

        <!-- Crypto News Section -->
        <!-- This will be split into two sections: Pulse and Horizon -->


        <!-- PredictAI Pulse Section (CryptoCompare) -->
        <section class="mb-12 md:mb-16 pt-8 border-t border-light-border dark:border-dark-border">
            <div class="mb-6 text-center">
                <h2 class="text-3xl font-bold text-light-text dark:text-dark-text">
                    <i class="fas fa-heartbeat text-accent mr-2"></i>PredictAI <span class="text-accent">Pulse</span>
                </h2>
                <p class="text-base text-light-text-secondary dark:text-dark-text-secondary mt-1">Market Vitals & Immediate Opportunities from CryptoCompare</p>
            </div>

            <!-- Pulse: AI Token Ideas -->
            <div class="mb-8 md:mb-12">
                <h3 class="text-2xl font-semibold mb-3 text-light-text dark:text-dark-text flex items-center">
                    <i class="fas fa-lightbulb text-accent mr-2"></i>Pulse Token Ideas
                    <span id="pulse-loading-indicator" class="ml-3 text-sm text-light-text-secondary dark:text-dark-text-secondary">(<i class="fas fa-sync fa-spin mr-1"></i>Updating...)</span>
                </h3>
                <p class="text-sm text-light-text-secondary dark:text-dark-text-secondary mb-6">AI-generated concepts from real-time CryptoCompare data.</p>
                <div id="pulse-hype-suggestions-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                    <!-- Pulse AI Token Suggestion Cards will be injected here -->
                </div>
            </div>

            <!-- Pulse: Crypto News -->
            <div>
                <h3 class="text-2xl font-semibold mb-3 text-light-text dark:text-dark-text flex items-center">
                    <i class="fas fa-newspaper text-accent mr-2"></i>Pulse News Feed
                    <span id="pulse-news-loading-indicator" class="ml-3 text-sm text-light-text-secondary dark:text-dark-text-secondary" style="display: none;">(<i class="fas fa-sync fa-spin mr-1"></i>Updating news...)</span>
                </h3>
                <div id="pulse-news-articles-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                    <p class="text-sm text-light-text-secondary dark:text-dark-text-secondary md:col-span-2 lg:col-span-3">Loading Pulse news...</p>
                </div>
            </div>
        </section>

        <!-- PredictAI Horizon Section (GNews) -->
        <section class="mb-8 md:mb-12 pt-8 border-t border-light-border dark:border-dark-border">
            <div class="mb-6 text-center">
                <h2 class="text-3xl font-bold text-light-text dark:text-dark-text">
                    <i class="fas fa-binoculars text-highlight mr-2"></i>PredictAI <span class="text-highlight">Horizon</span>
                </h2>
                <p class="text-base text-light-text-secondary dark:text-dark-text-secondary mt-1">Broader Market Insights & Emerging Trends from GNews</p>
            </div>
             <!-- Horizon: AI Token Ideas -->
            <div class="mb-8 md:mb-12">
                <h3 class="text-2xl font-semibold mb-3 text-light-text dark:text-dark-text flex items-center">
                    <i class="fas fa-seedling text-highlight mr-2"></i>Horizon Token Ideas
                    <span id="horizon-loading-indicator" class="ml-3 text-sm text-light-text-secondary dark:text-dark-text-secondary">(<i class="fas fa-sync fa-spin mr-1"></i>Updating...)</span>
                </h3>
                <p class="text-sm text-light-text-secondary dark:text-dark-text-secondary mb-6">AI-generated concepts from wider GNews market signals.</p>
                <div id="horizon-hype-suggestions-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                    <!-- Horizon AI Token Suggestion Cards will be injected here -->
                </div>
            </div>

            <!-- Horizon: Crypto News -->
            <div>
                <h3 class="text-2xl font-semibold mb-3 text-light-text dark:text-dark-text flex items-center">
                    <i class="fas fa-globe-americas text-highlight mr-2"></i>Horizon News Feed
                    <span id="horizon-news-loading-indicator" class="ml-3 text-sm text-light-text-secondary dark:text-dark-text-secondary" style="display: none;">(<i class="fas fa-sync fa-spin mr-1"></i>Updating news...)</span>
                </h3>
                <div id="horizon-news-articles-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                     <p class="text-sm text-light-text-secondary dark:text-dark-text-secondary md:col-span-2 lg:col-span-3">Loading Horizon news...</p>
                </div>
            </div>
        </section>

        <!-- Token Launch Form -->
        <section class="card bg-light-card-bg dark:bg-dark-card-bg p-6 md:p-8 rounded-xl shadow-card-light dark:shadow-card-dark">
          <form id="token-launch-form">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="token-name" class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">Token Name</label>
                <input type="text" id="token-name" name="token-name" placeholder="e.g., PepeKiller" class="w-full p-3 rounded-md border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg focus:ring-accent focus:border-accent placeholder-light-text-secondary/50 dark:placeholder-dark-text-secondary/50 text-sm">
              </div>
              <div>
                <label for="token-symbol" class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">Token Symbol</label>
                <input type="text" id="token-symbol" name="token-symbol" placeholder="e.g., PEKI" class="w-full p-3 rounded-md border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg focus:ring-accent focus:border-accent placeholder-light-text-secondary/50 dark:placeholder-dark-text-secondary/50 text-sm">
              </div>
              <div>
                <label for="total-supply" class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">Total Supply</label>
                <input type="number" id="total-supply" name="total-supply" value="1000000000" readonly class="w-full p-3 rounded-md border border-light-border dark:border-dark-border bg-light-bg/50 dark:bg-dark-bg/50 focus:ring-accent focus:border-accent placeholder-light-text-secondary/50 dark:placeholder-dark-text-secondary/50 text-sm cursor-not-allowed">
              </div>
              <div>
                <label for="decimals" class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">Decimals</label>
                <input type="number" id="decimals" name="decimals" value="9" readonly class="w-full p-3 rounded-md border border-light-border dark:border-dark-border bg-light-bg/50 dark:bg-dark-bg/50 focus:ring-accent focus:border-accent placeholder-light-text-secondary/50 dark:placeholder-dark-text-secondary/50 text-sm cursor-not-allowed">
              </div>
              <div class="md:col-span-2">
                <label for="token-description" class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">Token Description (Optional)</label>
                <textarea id="token-description" name="token-description" rows="3" placeholder="Briefly describe your token..." class="w-full p-3 rounded-md border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg focus:ring-accent focus:border-accent placeholder-light-text-secondary/50 dark:placeholder-dark-text-secondary/50 text-sm"></textarea>
              </div>

              <!-- New Metadata Fields -->
              <div class="md:col-span-2">
                <label for="token-website" class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">Website URL (Auto-filled)</label>
                <input type="url" id="token-website" name="token-website" readonly class="w-full p-3 rounded-md border border-light-border dark:border-dark-border bg-light-bg/50 dark:bg-dark-bg/50 text-sm cursor-not-allowed placeholder-light-text-secondary/70 dark:placeholder-dark-text-secondary/70">
                <p class="mt-1 text-xs text-light-text-secondary dark:text-dark-text-secondary">Typically the source article for AI-generated ideas, or N/A.</p>
              </div>
              <div>
                <label for="token-twitter" class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">X (Twitter)</label>
                <input type="url" id="token-twitter" name="token-twitter" value="https://x.com/PredictAiPro" readonly class="w-full p-3 rounded-md border border-light-border dark:border-dark-border bg-light-bg/50 dark:bg-dark-bg/50 text-sm cursor-not-allowed">
              </div>
              <div>
                <label for="token-telegram" class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">Telegram</label>
                <input type="url" id="token-telegram" name="token-telegram" value="https://t.me/predictAIofficial" readonly class="w-full p-3 rounded-md border border-light-border dark:border-dark-border bg-light-bg/50 dark:bg-dark-bg/50 text-sm cursor-not-allowed">
              </div>
              <!-- End New Metadata Fields -->

              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">Launch Platform</label>
                <input type="hidden" id="selected-launch-platform" name="selected-launch-platform" value="pump.fun">
                <div class="grid grid-cols-2 gap-3 mt-1">
                    <button type="button" data-platform="pump.fun" class="platform-select-btn active-platform-btn flex items-center justify-center text-sm p-3 rounded-md border border-accent bg-accent/10 dark:bg-accent/20 text-accent dark:text-accent font-medium hover:bg-accent/20 dark:hover:bg-accent/30 transition-all">
                        <img src="pumpfun.png" alt="pump.fun logo" class="w-5 h-5 mr-2 rounded-sm">
                        pump.fun
                    </button>
                    <button type="button" data-platform="moon.it" class="platform-select-btn flex items-center justify-center text-sm p-3 rounded-md border border-light-border dark:border-dark-border hover:border-highlight hover:text-highlight dark:hover:border-highlight dark:hover:text-highlight font-medium transition-all">
                        <img src="moonit.png" alt="moon.it logo" class="w-5 h-5 mr-2 rounded-sm">
                        moon.it
                    </button>
                </div>
              </div>
               <div class="md:col-span-2">
                <label for="token-image" class="block text-sm font-medium text-light-text dark:text-dark-text-secondary mb-1.5">Token Image URL (Optional)</label>
                <input type="url" id="token-image" name="token-image" placeholder="https://example.com/image.png" class="w-full p-3 rounded-md border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg focus:ring-accent focus:border-accent placeholder-light-text-secondary/50 dark:placeholder-dark-text-secondary/50 text-sm">
                <p class="mt-1 text-xs text-light-text-secondary dark:text-dark-text-secondary">Link to a direct image (PNG, JPG, GIF). Recommended: square, 256x256px.</p>
              </div>
            </div>
            <div class="mt-8 text-center">
              <button type="submit" id="launch-token-btn" class="cursor-btn bg-accent text-gray-900 font-medium rounded-md px-8 py-3 text-base shadow-cursor hover:shadow-cursor-hover hover:bg-accent-hover dark:bg-accent dark:text-gray-900 dark:shadow-dark-cursor dark:hover:shadow-dark-cursor-hover dark:hover:bg-accent-hover">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-2 -mt-0.5" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z" clip-rule="evenodd" />
                </svg>
                Launch now with PredictAI
              </button>
            </div>
          </form>
        </section>

      </div>
    </main>

    <!-- Footer -->
    <footer class="w-full bg-light-sidebar text-light-text-secondary py-6 px-6 md:px-10 mt-auto border-t border-light-border dark:bg-dark-sidebar dark:text-dark-text-secondary dark:border-dark-border">
      <div class="max-w-container mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="text-sm">
          © 2025 PredictAI. All rights reserved.
        </div>
        <div class="flex gap-3">
          <a href="https://x.com/PredictAiPro" target="_blank" rel="noopener noreferrer" class="footer-icon text-light-text-secondary hover:text-accent dark:text-dark-text-secondary dark:hover:text-accent" title="X (Twitter)">
            <svg xmlns='http://www.w3.org/2000/svg' class='w-5 h-5' fill='currentColor' viewBox='0 0 16 16'>
              <path d='M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.602.75Zm-.86 13.028h1.36L4.323 2.145H2.865z'/>
            </svg>
          </a>
          <a href="https://t.me/predictAIofficial" target="_blank" rel="noopener noreferrer" class="footer-icon text-light-text-secondary hover:text-accent dark:text-dark-text-secondary dark:hover:text-accent" title="Telegram">
            <svg fill="currentColor" viewBox="0 0 24 24" class="w-5 h-5"><path d="M9.04 16.87l-.39 3.66c.56 0 .8-.24 1.09-.53l2.62-2.5 5.44 3.98c1 .55 1.72.26 1.97-.92l3.58-16.84c.32-1.48-.54-2.06-1.5-1.7L2.2 9.3c-1.45.56-1.43 1.36-.25 1.72l4.6 1.44 10.7-6.74c.5-.32.96-.14.58.18z"/></svg>
          </a>
          <a href="#" class="footer-icon text-light-text-secondary hover:text-accent dark:text-dark-text-secondary dark:hover:text-accent" title="Discord">
            <svg fill="currentColor" viewBox="0 0 24 24" class="w-5 h-5"><path d="M20.317 4.3698a19.7913 19.7913 0 0 0-4.8851-1.5152.0741.0741 0 0 0-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 0 0-.0785-.037 19.7363 19.7363 0 0 0-4.8852 1.515.0699.0699 0 0 0-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 0 0 .0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 0 0 .0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 0 0-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 0 1-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 0 1 .0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 0 1 .0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 0 1-.0066.1276 12.2986 12.2986 0 0 1-1.8732.8914.0766.0766 0 0 0-.0406.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 0 0 .0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 0 0 .0312-.0552c.5004-5.177-.8382-9.673-3.5485-13.6604a.061.061 0 0 0-.0312-.0286zM8.02 15.3312c-1.1835 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1836 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg>
          </a>
        </div>
      </div>
    </footer>
  </div> <!-- End Main Content Wrapper -->

  <!-- Pre-Activation Wallet Popup (Copied from index.html) -->
  <div id="pre-activation-popup" class="fixed inset-0 bg-black/70 dark:bg-black/80 backdrop-blur-md flex items-center justify-center z-50 hidden p-4">
    <div class="bg-light-card-bg dark:bg-dark-card-bg p-0 rounded-xl shadow-2xl w-full max-w-lg text-center relative overflow-hidden">
      <img src="banner.png" alt="PredictAI Banner" class="w-full h-auto object-cover mb-2 sm:mb-0">
      <button id="close-pre-activation-popup" class="absolute top-3 right-4 text-white hover:text-gray-200 text-3xl bg-black/30 rounded-full w-8 h-8 flex items-center justify-center">&times;</button>
      
      <div class="p-6 md:p-8">
        <div class="flex items-center justify-center mb-3">
            <svg class="h-7 w-7 text-accent mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12.75 3.03v.568c0 .334.148.65.405.85l.708.568c.295.236.442.606.442.98v.568c0 .334-.148.65-.405.85l-.708.568c-.295.236-.442.606-.442.98v.568c0 .334.148.65.405.85l.708.568c.295.236.442.606.442.98v.568c0 .334-.148.65-.405.85l-.708.568c-.295.236-.442.606-.442.98v0M7.5 3.03v.568c0 .334-.148.65-.405.85l-.708.568c-.295.236-.442.606-.442.98v.568c0 .334.148.65.405.85l.708.568c.295.236.442.606.442.98v.568c0 .334-.148.65-.405.85l-.708.568c-.295.236-.442.606-.442.98v.568c0 .334.148.65.405.85l.708.568c.295.236.442.606.442.98v0" /></svg>
            <h2 class="text-xl sm:text-2xl font-semibold text-light-text dark:text-dark-text">Almost Ready to Connect!</h2>
        </div>
        <p class="text-xs sm:text-sm text-light-text-secondary dark:text-dark-text-secondary mb-4 leading-relaxed">
          Full wallet integration and all related features will be activated for everyone approximately <strong class="text-light-text dark:text-dark-text">48 hours after our official launch.</strong>
          <br class="hidden sm:block"/>Stay updated! Join our official Telegram for launch announcements.
        </p>
        <p class="text-base sm:text-lg font-semibold text-accent dark:text-accent-hover mb-5">
            Launch Countdown: <span class="animate-pulse">Activating Soon!</span>
        </p>
        <div class="flex flex-col sm:flex-row justify-center items-center gap-3">
            <a href="https://t.me/predictAIofficial" target="_blank" rel="noopener noreferrer" 
               class="w-full sm:w-auto bg-transparent border-2 border-white text-white font-semibold rounded-lg px-5 py-2.5 text-sm hover:bg-white/10 dark:hover:bg-white/20 transition-colors duration-300 inline-flex items-center justify-center">
                <i class="fab fa-telegram-plane mr-2"></i> Join on Telegram
            </a>
            <button id="got-it-button" 
                    class="w-full sm:w-auto bg-transparent border-2 border-accent text-accent font-semibold rounded-lg px-8 py-2.5 text-sm hover:bg-accent hover:text-gray-900 transition-colors duration-300">
              Got It!
            </button>
        </div>
        <p class="text-xs text-light-text-secondary dark:text-dark-text-secondary mt-5">
            Preview. Full functionality soon!
        </p>
      </div>
    </div>
  </div>

  <script>
    // Common scripts (Theme Toggle, Sidebar, etc.)
    const html = document.documentElement;
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    // Connect Wallet Button and Popup elements will be declared within DOMContentLoaded

    function setTheme(mode) {
      localStorage.setItem('theme', mode);
      if (mode === 'dark') {
        html.classList.add('dark');
        html.classList.remove('light');
        themeIcon.textContent = '☀️';
        // Update chart for dark mode if it exists
        if (typeof window.updateChartTheme === 'function') window.updateChartTheme('dark');
      } else {
        html.classList.add('light');
        html.classList.remove('dark');
        themeIcon.textContent = '🌙';
        // Update chart for light mode if it exists
        if (typeof window.updateChartTheme === 'function') window.updateChartTheme('light');
      }
    }

    // Initial theme setup
    const savedTheme = localStorage.getItem('theme');
    // Always default to dark mode if no theme is saved
    const initialTheme = savedTheme || 'dark'; 
    setTheme(initialTheme);
    // Ensure the class is set correctly on initial load based on initialTheme
    // The setTheme function already handles adding/removing classes, 
    // but we ensure the correct class is on the html element directly after definition.
    if (initialTheme === 'dark') {
        html.classList.add('dark');
        html.classList.remove('light'); // Ensure light is not present
    } else {
        html.classList.add('light');
        html.classList.remove('dark'); // Ensure dark is not present
    }

    themeToggle.addEventListener('click', () => {
      setTheme(html.classList.contains('dark') ? 'light' : 'dark');
    });

    // Connect Wallet logic
    // const connectBtn = document.getElementById('connect-wallet'); // Already declared above for new popup
    // const walletBalance = document.getElementById('wallet-balance'); // Already declared above for new popup
    // REMOVED OLD SweetAlert Logic block that started with "if (connectBtn) { ... }"

    // Active Sidebar Link
    document.addEventListener('DOMContentLoaded', function() {
      // Wallet Connect Logic (New - from index.html)
      const connectWalletBtn = document.getElementById('connect-wallet');
      const walletBalanceSpan = document.getElementById('wallet-balance');
      const walletBalanceAmount = document.getElementById('wallet-balance-amount');
      const preActivationPopup = document.getElementById('pre-activation-popup');
      const closePreActivationPopupButton = document.getElementById('close-pre-activation-popup');
      const gotItButton = document.getElementById('got-it-button');

      function openPreActivationPopup() {
        if (preActivationPopup && !localStorage.getItem('predictAI_almostReadyAcknowledged')) {
            preActivationPopup.classList.remove('hidden');
        } else {
            Swal.fire({
                title: 'Wallet Feature',
                text: 'Full wallet functionality is activating soon! Check back after our official launch.',
                icon: 'info',
                confirmButtonColor: tailwind.config.theme.extend.colors.accent,
                background: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-card-bg'] : tailwind.config.theme.extend.colors['light-card-bg'],
                color: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-text'] : tailwind.config.theme.extend.colors['light-text'],
            });
        }
      }

      if (connectWalletBtn) {
          connectWalletBtn.addEventListener('click', openPreActivationPopup);
      }

      if (preActivationPopup && closePreActivationPopupButton && gotItButton) {
          closePreActivationPopupButton.addEventListener('click', () => {
              preActivationPopup.classList.add('hidden');
          });

          gotItButton.addEventListener('click', () => {
              preActivationPopup.classList.add('hidden');
              localStorage.setItem('predictAI_almostReadyAcknowledged', 'true');
              Swal.fire({
                  title: 'Got it!',
                  text: 'Thanks for your patience! Full features are on the way.',
                  icon: 'success',
                  timer: 2000,
                  showConfirmButton: false,
                  background: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-card-bg'] : tailwind.config.theme.extend.colors['light-card-bg'],
                  color: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-text'] : tailwind.config.theme.extend.colors['light-text'],
              });
          });
      } else {
          console.warn("[Token Launch Page] New popup HTML elements (pre-activation-popup, etc.) not found. Ensure they are in the HTML.");
      }
      // End Wallet Connect Logic

      // Existing scripts from token-launch.html that should be within DOMContentLoaded
      const tokenNameInput = document.getElementById('token-name');
      const tokenSymbolInput = document.getElementById('token-symbol');
      const tokenDescriptionInput = document.getElementById('token-description');
      const tokenImageInput = document.getElementById('token-image');
      const tokenWebsiteInput = document.getElementById('token-website');
      const tokenTwitterInput = document.getElementById('token-twitter');
      const tokenTelegramInput = document.getElementById('token-telegram');
      const launchPlatformSelect = document.getElementById('selected-launch-platform');

      // ... existing code ...
    });

    // Token Launch Form Logic
    const form = document.getElementById('token-launch-form');
    if (form) {
        form.addEventListener('submit', function(event) {
            event.preventDefault();
            const timestamp = new Date().toISOString();
            const tokenName = document.getElementById('token-name').value;
            const tokenSymbol = document.getElementById('token-symbol').value;
            const description = document.getElementById('token-description').value;
            const launchpad = document.getElementById('selected-launch-platform').value;
            const imageLink = document.getElementById('token-image').value;
            const launchStatus = "Pending";

            const params = new URLSearchParams({
                timestamp,
                tokenName,
                tokenSymbol,
                description,
                launchpad,
                imageLink,
                launchStatus
            });

            fetch('https://hooks.zapier.com/hooks/catch/23053180/2jhsjwo/?' + params.toString(), {
                method: 'GET'
            }).then(response => {
                if (response.ok) {
                    Swal.fire('Erfolg!', 'Dein Token wurde an das Team übermittelt.', 'success');
                    form.reset();
                } else {
                    Swal.fire('Fehler!', 'Es gab ein Problem beim Senden.', 'error');
                }
            }).catch(() => {
                Swal.fire('Fehler!', 'Es gab ein Problem beim Senden.', 'error');
            });
        });
    }

    // Platform selection button logic
    const platformButtons = document.querySelectorAll('.platform-select-btn');
    const selectedPlatformInput = document.getElementById('selected-launch-platform');

    platformButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Remove active class from all buttons
            platformButtons.forEach(btn => {
                btn.classList.remove('active-platform-btn', 'border-accent', 'bg-accent/10', 'dark:bg-accent/20', 'text-accent', 'dark:text-accent');
                btn.classList.add('border-light-border', 'dark:border-dark-border', 'hover:border-highlight', 'hover:text-highlight', 'dark:hover:border-highlight', 'dark:hover:text-highlight');
            });
            // Add active class to clicked button
            button.classList.add('active-platform-btn', 'border-accent', 'bg-accent/10', 'dark:bg-accent/20', 'text-accent', 'dark:text-accent');
            button.classList.remove('border-light-border', 'dark:border-dark-border', 'hover:border-highlight', 'hover:text-highlight', 'dark:hover:border-highlight', 'dark:hover:text-highlight');
            
            // Update hidden input
            selectedPlatformInput.value = button.dataset.platform;
            // console.log("Selected platform:", selectedPlatformInput.value);
        });
    });

    // AI Hype & Token Suggestions Logic
    // const hypeSuggestionsContainer = document.getElementById('hype-suggestions-container'); // Will be replaced by specific ones
    // const loadingIndicator = document.getElementById('loading-indicator'); // Will be replaced
    // const newsArticlesContainer = document.getElementById('news-articles-container'); // Will be replaced
    // const newsLoadingIndicator = document.getElementById('news-loading-indicator'); // Will be replaced

    // PredictAI Pulse (CryptoCompare) Elements
    const pulseHypeSuggestionsContainer = document.getElementById('pulse-hype-suggestions-container');
    const pulseLoadingIndicator = document.getElementById('pulse-loading-indicator');
    const pulseNewsArticlesContainer = document.getElementById('pulse-news-articles-container');
    const pulseNewsLoadingIndicator = document.getElementById('pulse-news-loading-indicator');
    
    // PredictAI Horizon (GNews) Elements
    const horizonHypeSuggestionsContainer = document.getElementById('horizon-hype-suggestions-container');
    const horizonLoadingIndicator = document.getElementById('horizon-loading-indicator');
    const horizonNewsArticlesContainer = document.getElementById('horizon-news-articles-container');
    const horizonNewsLoadingIndicator = document.getElementById('horizon-news-loading-indicator');

    const CRYPTOCOMPARE_API_KEY = 'd5b25239ee179f984291b0ae0865e47beaa0d9cfb0cf2c8a17e3c87b7447583f'; // Restored
    const GNEWS_API_KEY = '5e81d72f46e4404ae3f2bb8c846ba762';
    
    let fetchedPulseNews = [];
    let currentPulseTokenIdeas = [];
    let fetchedHorizonNews = [];
    let currentHorizonTokenIdeas = [];

    // Default/Fallback Token Ideas (can be shared or made specific if needed)
    const fallbackTokenIdeas = [
        {
            hypeTheme: "AI Revolution",
            name: "NeuralNet Token",
            symbol: "NNT",
            description: "Powering the next generation of decentralized AI applications.",
            supply: 1000000000,
            decimals: 9,
            imageUrl: "https://source.unsplash.com/random/100x100/?abstract,ai,future",
            hypeScore: 92,
            icon: "fa-brain"
        },
        {
            hypeTheme: "Gaming & Metaverse",
            name: "PixelVerse Coin",
            symbol: "PIXEL",
            description: "The currency for a new immersive gaming metaverse.",
            supply: 500000000,
            decimals: 6,
            imageUrl: "https://source.unsplash.com/random/100x100/?gaming,metaverse,neon",
            hypeScore: 88,
            icon: "fa-gamepad"
        },
        {
            hypeTheme: "DeFi 2.0",
            name: "YieldFarm Pro",
            symbol: "YFP",
            description: "Advanced yield farming strategies made simple and secure.",
            supply: 100000000,
            decimals: 18,
            imageUrl: "https://source.unsplash.com/random/100x100/?finance,crypto,chart",
            hypeScore: 75,
            icon: "fa-piggy-bank"
        },
        {
            hypeTheme: "Solana Ecosystem",
            name: "SolSpark",
            symbol: "SPARK",
            description: "A community-driven token to fuel innovation on Solana.",
            supply: 10000000000,
            decimals: 9,
            imageUrl: "https://source.unsplash.com/random/100x100/?solana,blockchain,fast",
            hypeScore: 95,
            icon: "fa-solar-panel"
        },
        {
            hypeTheme: "Meme Magic",
            name: "DogeMoonshot",
            symbol: "DMS",
            description: "To the moon and beyond! The ultimate meme-powered rocket.",
            supply: 1000000000000,
            decimals: 9,
            imageUrl: "https://source.unsplash.com/random/100x100/?dog,moon,rocket",
            hypeScore: 82,
            icon: "fa-rocket"
        },
        {
            hypeTheme: "Eco-Friendly Crypto",
            name: "GreenChain",
            symbol: "GCN",
            description: "Sustainable and eco-conscious blockchain solutions.",
            supply: 250000000,
            decimals: 8,
            imageUrl: "https://source.unsplash.com/random/100x100/?nature,green,plant",
            hypeScore: 70,
            icon: "fa-leaf"
        }
    ];

    let currentTokenIdeas = [...fallbackTokenIdeas]; // This will likely be split or managed per source

    function extractKeywordsFromTitle(title) {
        if (!title) return [];
        const commonWords = new Set([
            'a', 'an', 'the', 'is', 'are', 'was', 'were', 'be', 'been', 'being',
            'have', 'has', 'had', 'do', 'does', 'did', 'will', 'would', 'should', 'can',
            'could', 'may', 'might', 'must', 'and', 'but', 'or', 'nor', 'for', 'so', 'yet',
            'in', 'on', 'at', 'by', 'from', 'to', 'with', 'about', 'above', 'after', 'again',
            'against', 'all', 'am', 'as', 'any', 'because', 'before', 'below', 'between', 'both',
            'during', 'each', 'few', 'further', 'here', 'how', 'i', 'if', 'into', 'it', 'its', 'itself',
            'just', 'me', 'more', 'most', 'my', 'myself', 'no', 'not', 'now', 'of', 'off', 'once',
            'only', 'other', 'our', 'ours', 'ourselves', 'out', 'over', 'own', 'same', 'she',
            'he', 'him', 'his', 'her', 'hers', 'herself', 'himself', 'some', 'such', 'than', 'that',
            'their', 'theirs', 'them', 'themselves', 'then', 'there', 'these', 'they', 'this',
            'those', 'through', 'too', 'under', 'until', 'up', 'very', 'we', 'what', 'when',
            'where', 'which', 'while', 'who', 'whom', 'why', 'you', 'your', 'yours', 'yourself',
            'yourselves', 'crypto', 'cryptocurrency', 'bitcoin', 'ethereum', 'blockchain', 'solana',
            'token', 'coin', 'price', 'market', 'new', 'latest', 'update', 'shares', 'launch', 'reveals',
            'says', 'talks', 'about', 'could', 'should', 'would', 'report', 'reports', 'analysis', 'outlook'
        ]);

        const words = title.toLowerCase().replace(/[^a-z0-9\s]/g, '').split(/\s+/);
        let keywords = words.filter(word => word.length > 3 && !commonWords.has(word));
        
        // Prioritize words that were originally capitalized (potential proper nouns)
        const originalWords = title.replace(/[^a-zA-Z0-9\s]/g, '').split(/\s+/);
        const capitalizedKeywords = originalWords.filter(word => 
            word.length > 3 && 
            word[0] === word[0].toUpperCase() && 
            !commonWords.has(word.toLowerCase()) &&
            keywords.includes(word.toLowerCase())
        );

        if (capitalizedKeywords.length > 0) {
            keywords = capitalizedKeywords.map(k => k.toLowerCase()); // Keep them lowercase for consistency
        }

        return [...new Set(keywords)].slice(0, 2); // Return unique keywords, max 2
    }

    function generateTokenSymbol(keywords) {
        let symbol = '';
        if (keywords.length > 0) {
            symbol = keywords.map(k => k.substring(0, 1)).join('').toUpperCase();
            if (keywords.length === 1 && keywords[0].length >= 3) {
                symbol = keywords[0].substring(0, 3).toUpperCase();
            }
        }
        // Ensure symbol is between 3 and 4 chars, add random chars if too short
        while (symbol.length < 3) {
            symbol += String.fromCharCode(65 + Math.floor(Math.random() * 26)); // Random uppercase letter
        }
        return symbol.substring(0, 4);
    }

    function generateAndDisplayTokenIdeas(newsArray, ideasArray, suggestionsContainerElement, loadingIndicatorElement, sourceName) {
        if (!newsArray || newsArray.length === 0) {
            // Use a copy of fallbackTokenIdeas for this specific source
            ideasArray.length = 0; // Clear existing ideas for this source
            ideasArray.push(...fallbackTokenIdeas.map(idea => ({...idea, originalSource: sourceName}))); // Tag with source
        } else {
            const newsBasedIdeas = [];
            const usedSymbols = new Set();

            newsArray.forEach(article => {
                const keywords = extractKeywordsFromTitle(article.title);
                if (keywords.length > 0) {
                    let tokenName = keywords.map(k => k.charAt(0).toUpperCase() + k.slice(1)).join(' ') + ' Cash';
                    if (keywords.length === 1) tokenName = keywords[0].charAt(0).toUpperCase() + keywords[0].slice(1) + ' Rocket';
                    
                    // Generate token symbol strictly from the first letter of each word in the name
                    let tokenSymbol = tokenName.split(' ')
                                             .filter(word => word.length > 0) // Ensure empty strings (e.g. from multiple spaces) are ignored
                                             .map(word => word.charAt(0))
                                             .join('')
                                             .toUpperCase();
                    
                    // If the name was empty or had no processable words, create a truly random 3-letter symbol as a fallback
                    if (tokenSymbol.length === 0) {
                        for (let i = 0; i < 3; i++) {
                            tokenSymbol += String.fromCharCode(65 + Math.floor(Math.random() * 26));
                        }
                    }

                    let attempt = 0;
                    while(usedSymbols.has(tokenSymbol) && attempt < 10) {
                        tokenSymbol = generateTokenSymbol(keywords.concat(String.fromCharCode(65 + Math.floor(Math.random()*26))));
                        attempt++;
                    }
                    usedSymbols.add(tokenSymbol);

                    const randomSupply = 1000000000; // Fixed
                    const randomDecimals = 9; // Fixed
                    const randomHypeScore = Math.floor(Math.random() * 30) + 70;
                    const genericIcons = ["fa-rocket", "fa-bolt", "fa-shield-halved", "fa-star", "fa-diamond", "fa-satellite-dish"];

                    newsBasedIdeas.push({
                        hypeTheme: `${sourceName} News: ${article.title ? article.title.substring(0, 25) : 'Related Topic'}...`,
                        name: tokenName,
                        symbol: tokenSymbol,
                        description: `Conceptual token inspired by ${sourceName} insights on ${keywords.join(' & ')}.`,
                        supply: randomSupply,
                        decimals: randomDecimals,
                        customLogoValue: tokenSymbol,
                        fallbackImageUrl: article.imageurl || article.image, // Ensure we get the image
                        hypeScore: randomHypeScore,
                        icon: genericIcons[Math.floor(Math.random() * genericIcons.length)],
                        originalSource: sourceName, // Tag with source
                        articleUrl: article.url // Added article URL to the idea object
                    });
                }
            });

            ideasArray.length = 0; // Clear existing ideas for this source
            if (newsBasedIdeas.length > 0) {
                shuffleArray(newsBasedIdeas);
                ideasArray.push(...newsBasedIdeas.slice(0, Math.min(newsBasedIdeas.length, 6)));
                if (ideasArray.length < 3 && fallbackTokenIdeas.length > 0) {
                    const needed = 3 - ideasArray.length;
                    ideasArray.push(...fallbackTokenIdeas.slice(0, needed).map(idea => ({...idea, originalSource: sourceName})));
                }
            } else {
                ideasArray.push(...fallbackTokenIdeas.map(idea => ({...idea, originalSource: sourceName})));
            }
        }
        // console.log(`Generated ${sourceName} ideas:`, ideasArray);
        displayHypeSuggestions(suggestionsContainerElement, ideasArray, loadingIndicatorElement);
    }

    function renderTokenSuggestionCard(idea) {
        const card = document.createElement('div');
        card.className = "card bg-light-card-bg dark:bg-dark-card-bg p-5 rounded-lg shadow-card-light dark:shadow-card-dark hover:shadow-lg dark:hover:shadow-2xl transition-shadow duration-300 cursor-pointer flex flex-col";
        
        const logoSize = 40; // Size for the jdenticon
        let logoHtml = '';
        // MODIFIED ORDER OF PRECEDENCE:
        // 1. Try to use the image from the news source (fallbackImageUrl)
        if (idea.fallbackImageUrl) {
             logoHtml = `<div class="mr-3 flex-shrink-0"><img src="${idea.fallbackImageUrl}" alt="${(idea.name || 'Token').substring(0,15)}" class="w-10 h-10 rounded-full object-cover"></div>`;
        } 
        // 2. If no news image, THEN Jdenticon (if customLogoValue exists)
        else if (idea.customLogoValue && typeof jdenticon !== 'undefined') { 
            const svgString = jdenticon.toSvg(idea.customLogoValue, logoSize);
            logoHtml = `<div class="mr-3 flex-shrink-0">${svgString}</div>`;
        } 
        // 3. If neither is available, THEN Font-Awesome Icon
        else {
            logoHtml = `<div class="mr-3 flex-shrink-0"><i class="fas ${idea.icon || 'fa-lightbulb'} text-accent text-3xl w-[40px] h-[40px] flex items-center justify-center"></i></div>`;
        }

        // Hype Meter Bar
        const hypeMeterPercentage = Math.max(10, Math.min(100, idea.hypeScore)); // Cap between 10% and 100%
        let hypeMeterColor = 'bg-green-500'; // Default: green
        if (idea.hypeScore < 70) hypeMeterColor = 'bg-yellow-500';
        if (idea.hypeScore < 40) hypeMeterColor = 'bg-red-500';

        card.innerHTML = `
            <div class="flex items-center mb-3">
                ${logoHtml}
                <div>
                    <h4 class="font-semibold text-lg text-light-text dark:text-dark-text leading-tight">${idea.name} (${idea.symbol})</h4>
                    <p class="text-xs text-accent font-medium">${idea.hypeTheme}</p>
                </div>
            </div>
            <p class="text-sm text-light-text-secondary dark:text-dark-text-secondary mb-3 flex-grow">${idea.description}</p>
            <div class="mb-3">
                <div class="flex justify-between items-center text-xs text-light-text-secondary dark:text-dark-text-secondary mb-1">
                    <span>HypeMeter™</span>
                    <span class="font-bold text-light-text dark:text-dark-text">${idea.hypeScore}/100</span>
                </div>
                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5">
                    <div class="${hypeMeterColor} h-2.5 rounded-full transition-all duration-500 ease-out" style="width: ${hypeMeterPercentage}%"></div>
                </div>
            </div>
            <button class="mt-auto w-full cursor-btn-sm bg-accent/10 hover:bg-accent/20 dark:bg-accent/20 dark:hover:bg-accent/30 text-accent font-medium py-2 px-3 rounded-md text-sm transition-colors duration-150">
                <i class="fas fa-flask-vial mr-1.5"></i>Prepare Token Launch
            </button>
        `;

        card.addEventListener('click', (event) => {
            // Prevent card click from triggering if the button itself was clicked
            if (event.target.closest('button')) return;
            populateFormWithIdea(idea);
        });
        
        card.querySelector('button').addEventListener('click', () => {
            populateFormWithIdea(idea);
            document.getElementById('token-launch-form').scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
        return card;
    }

    function populateFormWithIdea(idea) {
        document.getElementById('token-name').value = idea.name;
        document.getElementById('token-symbol').value = idea.symbol;
        document.getElementById('token-description').value = idea.description;
        document.getElementById('token-image').value = idea.fallbackImageUrl || '';
        document.getElementById('token-website').value = idea.articleUrl || '';
        // Nach dem Ausfüllen zum Formular scrollen
        document.getElementById('token-launch-form').scrollIntoView({ behavior: 'smooth', block: 'start' });
        Swal.fire({
            toast: true,
            icon: 'success',
            title: `'${idea.name}' details loaded into form!`,
            position: 'top-end',
            showConfirmButton: false,
            timer: 2000,
            timerProgressBar: true,
            background: document.documentElement.classList.contains('dark') ? '#1F2937' : '#FFFFFF',
            color: document.documentElement.classList.contains('dark') ? '#FFFFFF' : '#222222',
        });
    }

    function displayHypeSuggestions(container, ideasArray, loadingIndicatorElement) {
        if (!container) return;
        container.innerHTML = ''; 
        
        if (loadingIndicatorElement) loadingIndicatorElement.style.display = 'inline-flex';

        const ideasToDisplay = ideasArray.slice(0, 6); 

        if (ideasToDisplay.length === 0) {
            const noIdeasMessage = document.createElement('p');
            noIdeasMessage.className = "text-sm text-light-text-secondary dark:text-dark-text-secondary md:col-span-2 lg:col-span-3";
            noIdeasMessage.textContent = "No token ideas available at the moment. Waiting for news updates...";
            container.appendChild(noIdeasMessage);
        } else {
            ideasToDisplay.forEach(idea => {
                container.appendChild(renderTokenSuggestionCard(idea));
            });
        }
        
        if (loadingIndicatorElement) {
            setTimeout(() => { 
                loadingIndicatorElement.style.display = 'none';
            }, 200);
        }
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function renderNewsArticleCard(article) {
        const card = document.createElement('div');
        card.className = "flex flex-col card bg-light-card-bg dark:bg-dark-card-bg rounded-lg shadow-card-light dark:shadow-card-dark hover:shadow-lg dark:hover:shadow-2xl transition-shadow duration-300 overflow-hidden";

        let imageHtml = '';
        // GNews provides 'image', CryptoCompare provided 'imageurl'
        const imageUrl = article.imageurl || article.image; 

        if (imageUrl) {
            imageHtml = `
                <a href="${article.url || '#'}" target="_blank" rel="noopener noreferrer" class="block h-40 overflow-hidden">
                    <img src="${imageUrl}" alt="${(article.title || 'News Article').substring(0, 50)}..." class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                </a>`;
        } else {
            // Fallback if no image from API
            imageHtml = `
                <a href="${article.url || '#'}" target="_blank" rel="noopener noreferrer" class="block h-40 flex items-center justify-center bg-light-bg dark:bg-dark-bg dark:bg-opacity-50">
                    <i class="fas fa-image text-4xl text-light-text-secondary/50 dark:text-dark-text-secondary/50"></i>
                </a>`;
        }

        const title = article.title || "Untitled Article";
        // GNews provides 'description', CryptoCompare provided 'body'
        const body = article.body || article.description || "No content available for this article.";
        // GNews provides 'source.name', CryptoCompare provided 'source_info.name'
        const sourceName = (article.source_info && article.source_info.name) || (article.source && article.source.name) || article.source || "Unknown Source";
        
        // GNews provides 'publishedAt' as ISO string, CryptoCompare 'published_on' as timestamp.
        // Convert GNews 'publishedAt' (ISO string) to timestamp for consistency if needed, or use directly.
        let publishedDateText = "N/A";
        if (article.published_on && typeof article.published_on === 'number') { // CryptoCompare format (timestamp)
            publishedDateText = new Date(article.published_on * 1000).toLocaleDateString();
        } else if (article.publishedAt && typeof article.publishedAt === 'string') { // GNews format (ISO string)
            const dateObj = new Date(article.publishedAt);
            if (!isNaN(dateObj)) {
                publishedDateText = dateObj.toLocaleDateString();
            }
        }

        const contentHtml = `
            <div class="p-4 flex flex-col flex-grow">
                <h3 class="text-base font-semibold mb-2 text-light-text dark:text-dark-text leading-tight">
                    <a href="${article.url || '#'}" target="_blank" rel="noopener noreferrer" class="hover:text-accent transition-colors duration-150 line-clamp-3">
                        ${title}
                    </a>
                </h3>
                <p class="text-xs text-light-text-secondary dark:text-dark-text-secondary mb-3 line-clamp-3">${body.substring(0,120)}...</p> {/* Slightly increased length for body preview */}
                <div class="mt-auto pt-2 border-t border-light-border dark:border-dark-border">
                    <p class="text-xs text-light-text-secondary dark:text-dark-text-secondary">
                        Source: <span class="font-medium">${sourceName}</span>
                    </p>
                    <p class="text-xs text-light-text-secondary dark:text-dark-text-secondary">
                        Published: ${publishedDateText}
                    </p>
                </div>
            </div>`;

        card.innerHTML = imageHtml + contentHtml;
        return card;
    }

    // async function fetchNewsFromGNews() { // This will become fetchHorizonNews
    async function fetchHorizonNews() { // Renamed from fetchNewsFromGNews
        if (!horizonNewsArticlesContainer || !GNEWS_API_KEY) return; 
        if (horizonNewsLoadingIndicator) horizonNewsLoadingIndicator.style.display = 'inline-flex';

        const query = encodeURIComponent('crypto OR cryptocurrency OR bitcoin OR solana OR memecoin OR "market trend" OR ethereum OR "AI crypto"'); // Expanded query
        const apiUrl = `https://gnews.io/api/v4/search?q=${query}&lang=en&country=us&max=6&sortby=publishedAt&apikey=${GNEWS_API_KEY}`;

        try {
            const response = await fetch(apiUrl);
            if (!response.ok) {
                fetchedHorizonNews.length = 0; 
                generateAndDisplayTokenIdeas(fetchedHorizonNews, currentHorizonTokenIdeas, horizonHypeSuggestionsContainer, horizonLoadingIndicator, "Horizon");
                let errorMsg = `HTTP error! status: ${response.status}`;
                try {
                    const errorData = await response.json();
                    if (errorData && errorData.errors && errorData.errors.length > 0) {
                        errorMsg = errorData.errors.join(', ');
                    } else if (errorData && errorData.message) {
                        errorMsg = errorData.message;
                    }
                } catch (e) { /* Ignore if error response is not JSON */ }
                throw new Error(errorMsg);
            }
            const newsData = await response.json();

            if (newsData.articles && newsData.articles.length > 0) {
                horizonNewsArticlesContainer.innerHTML = ''; 
                fetchedHorizonNews = newsData.articles.slice(0, 6).map(article => ({ 
                    title: article.title,
                    body: article.description, 
                    imageurl: article.image,    
                    url: article.url,
                    source_info: { name: article.source.name }, 
                    published_on: article.publishedAt ? Math.floor(new Date(article.publishedAt).getTime() / 1000) : 0,
                    // Keep original GNews fields if needed by renderNewsArticleCard directly
                    description: article.description,
                    image: article.image,
                    source: article.source,
                    publishedAt: article.publishedAt
                }));
                
                fetchedHorizonNews.forEach(article => {
                    horizonNewsArticlesContainer.appendChild(renderNewsArticleCard(article));
                });
                generateAndDisplayTokenIdeas(fetchedHorizonNews, currentHorizonTokenIdeas, horizonHypeSuggestionsContainer, horizonLoadingIndicator, "Horizon");
            } else {
                horizonNewsArticlesContainer.innerHTML = '<p class="text-sm text-light-text-secondary dark:text-dark-text-secondary md:col-span-2 lg:col-span-3">No relevant crypto news articles found via GNews (Horizon). Check back later.</p>';
                fetchedHorizonNews.length = 0; 
                generateAndDisplayTokenIdeas(fetchedHorizonNews, currentHorizonTokenIdeas, horizonHypeSuggestionsContainer, horizonLoadingIndicator, "Horizon");
            }
        } catch (error) {
            console.error("Error fetching GNews (Horizon) news:", error);
            horizonNewsArticlesContainer.innerHTML = `<p class="text-sm text-red-500 dark:text-red-400 md:col-span-2 lg:col-span-3">Could not load Horizon news: ${error.message}</p>`;
            fetchedHorizonNews.length = 0; 
            generateAndDisplayTokenIdeas(fetchedHorizonNews, currentHorizonTokenIdeas, horizonHypeSuggestionsContainer, horizonLoadingIndicator, "Horizon");
        }
        if (horizonNewsLoadingIndicator) horizonNewsLoadingIndicator.style.display = 'none';
    }

    // Fetching function for CryptoCompare (Pulse)
    async function fetchPulseNews() {
        if (!pulseNewsArticlesContainer || !CRYPTOCOMPARE_API_KEY) return;
        if (pulseNewsLoadingIndicator) pulseNewsLoadingIndicator.style.display = 'inline-flex';

        const apiUrl = `https://min-api.cryptocompare.com/data/v2/news/?lang=EN&categories=BTC,ETH,SOL,MEME,TRENDING&sortOrder=latest&api_key=${CRYPTOCOMPARE_API_KEY}`;

        try {
            const response = await fetch(apiUrl);
            // No change needed for response.ok check here, as CC might return 200 OK with an error in the body.
            const newsData = await response.json();

            // Improved error handling for CryptoCompare specific error responses in JSON body
            if (newsData.Response === "Error" || (newsData.Type && newsData.Type !== 100 && newsData.Message)) {
                let apiErrorMessage = newsData.Message || "Unknown API error from CryptoCompare.";
                console.error("CryptoCompare API Error:", apiErrorMessage, newsData);
                pulseNewsArticlesContainer.innerHTML = `<p class="text-sm text-red-500 dark:text-red-400 md:col-span-2 lg:col-span-3">Could not load Pulse news: ${apiErrorMessage}</p>`;
                fetchedPulseNews.length = 0;
                generateAndDisplayTokenIdeas(fetchedPulseNews, currentPulseTokenIdeas, pulseHypeSuggestionsContainer, pulseLoadingIndicator, "Pulse");
                if (pulseNewsLoadingIndicator) pulseNewsLoadingIndicator.style.display = 'none';
                return; // Stop further processing
            }

            if (!response.ok) { // This handles actual HTTP errors (4xx, 5xx)
                fetchedPulseNews.length = 0;
                generateAndDisplayTokenIdeas(fetchedPulseNews, currentPulseTokenIdeas, pulseHypeSuggestionsContainer, pulseLoadingIndicator, "Pulse");
                let errorMsg = `HTTP error! status: ${response.status}`;
                try {
                    // Try to parse a more specific error message from CryptoCompare if available
                    const errorData = newsData; // newsData is already parsed
                    if (errorData && errorData.Message) {
                        errorMsg = errorData.Message;
                    }
                } catch (e) { /* Ignore if error response body is not parseable or not the expected CC format */ }
                throw new Error(errorMsg);
            }

            if (newsData.Data && Array.isArray(newsData.Data) && newsData.Data.length > 0) {
                pulseNewsArticlesContainer.innerHTML = ''; 
                fetchedPulseNews = newsData.Data.slice(0, 6).map(article => ({
                    ...article, // Spread existing fields
                    // Ensure essential fields for card rendering are present, even if nullish
                    title: article.title || "Untitled Pulse Article",
                    body: article.body || article.description || "No content available.",
                    imageurl: article.imageurl, // CryptoCompare uses imageurl
                    url: article.url,
                    source_info: { name: article.source_info?.name || article.source },
                    published_on: typeof article.published_on === 'number' ? article.published_on : 0,
                }));
                
                fetchedPulseNews.forEach(article => {
                    pulseNewsArticlesContainer.appendChild(renderNewsArticleCard(article));
                });
                generateAndDisplayTokenIdeas(fetchedPulseNews, currentPulseTokenIdeas, pulseHypeSuggestionsContainer, pulseLoadingIndicator, "Pulse");
            } else {
                pulseNewsArticlesContainer.innerHTML = '<p class="text-sm text-light-text-secondary dark:text-dark-text-secondary md:col-span-2 lg:col-span-3">No recent news from CryptoCompare (Pulse). Check back later.</p>';
                fetchedPulseNews.length = 0;
                generateAndDisplayTokenIdeas(fetchedPulseNews, currentPulseTokenIdeas, pulseHypeSuggestionsContainer, pulseLoadingIndicator, "Pulse");
            }
        } catch (error) {
            console.error("Error fetching CryptoCompare (Pulse) news:", error);
            pulseNewsArticlesContainer.innerHTML = `<p class="text-sm text-red-500 dark:text-red-400 md:col-span-2 lg:col-span-3">Could not load Pulse news: ${error.message}</p>`;
            fetchedPulseNews.length = 0;
            generateAndDisplayTokenIdeas(fetchedPulseNews, currentPulseTokenIdeas, pulseHypeSuggestionsContainer, pulseLoadingIndicator, "Pulse");
        }
        if (pulseNewsLoadingIndicator) pulseNewsLoadingIndicator.style.display = 'none';
    }
    
    // Initial calls and intervals
    document.addEventListener('DOMContentLoaded', () => {
        if (pulseNewsArticlesContainer && horizonNewsArticlesContainer) {
            fetchPulseNews();
            fetchHorizonNews();
            setInterval(fetchPulseNews, 300000); // 5 minutes for Pulse
            setInterval(fetchHorizonNews, 360000); // 6 minutes for Horizon (stagger to avoid simultaneous API rate limit issues)
        }
    });

    document.addEventListener('DOMContentLoaded', function() {
      // ... existing code ...

      // Add event listener for the token launch form
      const tokenLaunchForm = document.getElementById('token-launch-form');
      if (tokenLaunchForm) {
        tokenLaunchForm.addEventListener('submit', async function(event) {
          event.preventDefault(); // Prevent the default form submission

          // Get form data
          const formData = new FormData(tokenLaunchForm);
          const formDataObject = {};
          formData.forEach((value, key) => {
            formDataObject[key] = value;
          });

          // Send data to Zapier webhook
          try {
            // Baue die URL-Parameter
            const params = new URLSearchParams(formDataObject);
            const response = await fetch('https://hooks.zapier.com/hooks/catch/23053180/2jhsjwo/?' + params.toString(), {
              method: 'GET'
            });

            if (response.ok) {
              // Show success message
              Swal.fire({
                title: 'Success!',
                text: 'Your token launch request has been submitted.',
                icon: 'success',
                confirmButtonColor: tailwind.config.theme.extend.colors.accent,
                background: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-card-bg'] : tailwind.config.theme.extend.colors['light-card-bg'],
                color: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-text'] : tailwind.config.theme.extend.colors['light-text'],
              });
            } else {
              // Show error message
              Swal.fire({
                title: 'Error!',
                text: 'There was an error submitting your token launch request. Please try again.',
                icon: 'error',
                confirmButtonColor: tailwind.config.theme.extend.colors.accent,
                background: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-card-bg'] : tailwind.config.theme.extend.colors['light-card-bg'],
                color: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-text'] : tailwind.config.theme.extend.colors['light-text'],
              });
            }
          } catch (error) {
            console.error('Error:', error);
            // Show error message
            Swal.fire({
              title: 'Error!',
              text: 'There was an error submitting your token launch request. Please try again.',
              icon: 'error',
              confirmButtonColor: tailwind.config.theme.extend.colors.accent,
              background: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-card-bg'] : tailwind.config.theme.extend.colors['light-card-bg'],
              color: document.documentElement.classList.contains('dark') ? tailwind.config.theme.extend.colors['dark-text'] : tailwind.config.theme.extend.colors['light-text'],
            });
          }
        });
      }
    });
  </script>
</body>
</html> 
